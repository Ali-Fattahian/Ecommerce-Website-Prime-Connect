"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[690],{3363:function(e,n,t){var s=t(184);n.Z=function(e){var n=e.color;return(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"1em",viewBox:"0 0 448 512",style:{fill:n,fontSize:"18px"},children:(0,s.jsx)("path",{d:"M438.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L160 338.7 393.4 105.4c12.5-12.5 32.8-12.5 45.3 0z"})})}},2364:function(e,n,t){t.r(n),t.d(n,{default:function(){return k}});var s=t(4165),r=t(5861),a=t(9439),c=t(2791),i=t(9434),l=t(7689),o=t(7647),d=t(5630),u=t(1912),h=t(5006),x=t(3360),p=t(9535),f=t(2591),m=t(7022),v=t(1829),j=t(3363),g=t(2208),Z=t(184),b=function(){return(0,Z.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"1em",viewBox:"0 0 512 512",style:{fill:"var(--bs-secondary)",fontSize:"20px"},children:(0,Z.jsx)("path",{d:"M464 256A208 208 0 1 1 48 256a208 208 0 1 1 416 0zM0 256a256 256 0 1 0 512 0A256 256 0 1 0 0 256zM232 120V256c0 8 4 15.5 10.7 20l96 64c11 7.4 25.9 4.4 33.3-6.7s4.4-25.9-6.7-33.3L280 243.2V120c0-13.3-10.7-24-24-24s-24 10.7-24 24z"})})},y=function(e){var n=e.refresh,t=(0,i.v9)((function(e){return e.user})).userInfo,o=(0,i.v9)((function(e){return e.config})).baseURL,d=(0,c.useState)([]),p=(0,a.Z)(d,2),y=p[0],w=p[1],k=(0,l.s0)(),N=(0,c.useState)(""),S=(0,a.Z)(N,2),C=S[0],M=S[1],T=(0,c.useState)(null),A=(0,a.Z)(T,2),R=A[0],z=A[1],L=function(){var e=(0,r.Z)((0,s.Z)().mark((function e(n){var r;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.token,e.prev=1,e.next=4,u.Z.delete("".concat(o,"/users/messages/delete/").concat(n),{headers:{Authorization:"JWT ".concat(r)}});case 4:z(new Date),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),M("There was a problem deleting the message, Make sure you have a stable internet connection.");case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(n){return e.apply(this,arguments)}}(),D=function(){var e=(0,r.Z)((0,s.Z)().mark((function e(){var n,r,a;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=t.token,e.next=4,u.Z.get("/users/sent-messages",{headers:{Authorization:"JWT ".concat(n),"Content-Type":"application/json"},baseURL:o});case 4:r=e.sent,a=r.data,w(a),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),M("There was a problem loading the messages, Make sure you have a stable internet connection");case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}();return(0,c.useEffect)((function(){t||k("/login"),t&&t.isAdmin&&D()}),[n,R]),(0,Z.jsxs)(m.Z,{id:"user-list__container",children:[(0,Z.jsx)("h2",{className:"txt--black font-family-secondary mt-3 mb-0",style:{alignSelf:"flex-start"},children:"Sent Messages"}),C&&(0,Z.jsx)(h.Z,{variant:"danger",className:"mt-4",children:C}),(0,Z.jsxs)(f.Z,{striped:!0,responsive:!0,bordered:!0,className:"border-lt mt-4 table-dark table-hover",id:"user-list-table",style:{verticalAlign:"middle"},children:[(0,Z.jsx)("thead",{children:(0,Z.jsxs)("tr",{children:[(0,Z.jsx)("th",{children:"RECIPIENT"}),(0,Z.jsx)("th",{className:"text-center",children:(0,Z.jsx)(b,{})}),(0,Z.jsx)("th",{children:"READ"}),(0,Z.jsx)("th",{children:"MORE"})]})}),y.length>0?(0,Z.jsx)("tbody",{children:y.map((function(e){return(0,Z.jsxs)("tr",{children:[(0,Z.jsx)("td",{children:e.recipient.email}),(0,Z.jsx)("td",{children:e.createdAt.substring(0,10)}),(0,Z.jsx)("td",{children:e.isRead?(0,Z.jsx)(j.Z,{color:"green"}):(0,Z.jsx)(j.Z,{color:"red"})}),(0,Z.jsx)("td",{children:(0,Z.jsxs)(v.Z,{children:[(0,Z.jsx)(v.Z.Toggle,{variant:"primary",style:{color:"var(--bs-secondary)"},id:"dropdown-basic",children:(0,Z.jsx)(g.Z,{})}),(0,Z.jsxs)(v.Z.Menu,{children:[(0,Z.jsx)(v.Z.Item,{onClick:function(){return n=e.id,void k("/admin/sent-messages-list/".concat(n));var n},children:(0,Z.jsx)(x.Z,{variant:"dark-blue",className:"w-100",style:{color:"var(--bs-secondary)"},children:"Details"})}),(0,Z.jsx)(v.Z.Item,{onClick:function(){return L(e.id)},children:(0,Z.jsx)(x.Z,{variant:"danger",className:"w-100",children:"Delete"})})]})]})})]},e.id)}))}):(0,Z.jsx)("p",{className:"p-2 txt--gray",children:"No Messages were found"})]})]})},w=function(){var e=(0,i.v9)((function(e){return e.user})).userInfo,n=(0,i.v9)((function(e){return e.config})).baseURL,t=(0,c.useState)([]),o=(0,a.Z)(t,2),p=o[0],j=o[1],y=(0,l.s0)(),w=(0,c.useState)(""),k=(0,a.Z)(w,2),N=k[0],S=k[1],C=(0,c.useState)(null),M=(0,a.Z)(C,2),T=M[0],A=M[1],R=function(){var t=(0,r.Z)((0,s.Z)().mark((function t(r){var a,c,i;return(0,s.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=r.e,c=r.id,t.prev=1,i=e.token,t.next=5,u.Z.put("/users/received-messages/change-message-status/".concat(c),{isRead:a.target.checked},{headers:{Authorization:"JWT ".concat(i),"Content-Type":"application/json"},baseURL:n});case 5:t.next=10;break;case 7:t.prev=7,t.t0=t.catch(1),S("There was a problem changing your message's status, Make sure you have a stable internet connection");case 10:case"end":return t.stop()}}),t,null,[[1,7]])})));return function(e){return t.apply(this,arguments)}}(),z=function(){var t=(0,r.Z)((0,s.Z)().mark((function t(r){var a;return(0,s.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.token,t.prev=1,t.next=4,u.Z.delete("".concat(n,"/users/messages/delete/").concat(r),{headers:{Authorization:"JWT ".concat(a)}});case 4:A(new Date),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(1),S("There was a problem deleting the message, Make sure you have a stable internet connection.");case 10:case"end":return t.stop()}}),t,null,[[1,7]])})));return function(e){return t.apply(this,arguments)}}(),L=function(){var t=(0,r.Z)((0,s.Z)().mark((function t(){var r,a,c;return(0,s.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,r=e.token,t.next=4,u.Z.get("/users/received-messages",{headers:{Authorization:"JWT ".concat(r),"Content-Type":"application/json"},baseURL:n});case 4:a=t.sent,c=a.data,j(c),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),S("There was a problem loading the messages, Make sure you have a stable internet connection");case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(){return t.apply(this,arguments)}}();return(0,c.useEffect)((function(){e||y("/login"),e&&e.isAdmin&&L()}),[T]),(0,Z.jsxs)(m.Z,{id:"user-list__container",children:[(0,Z.jsx)("h2",{className:"txt--black font-family-secondary mt-3 mb-0",style:{alignSelf:"flex-start"},children:"Received Messages"}),N&&(0,Z.jsx)(h.Z,{variant:"danger",className:"mt-4",children:N}),(0,Z.jsxs)(f.Z,{striped:!0,responsive:!0,bordered:!0,className:"border-lt mt-4 table-dark table-hover",id:"user-list-table",style:{verticalAlign:"middle"},children:[(0,Z.jsx)("thead",{children:(0,Z.jsxs)("tr",{children:[(0,Z.jsx)("th",{children:"SENDER"}),(0,Z.jsx)("th",{className:"text-center",children:(0,Z.jsx)(b,{})}),(0,Z.jsx)("th",{children:"READ"}),(0,Z.jsx)("th",{className:"text-center",children:"MORE"})]})}),p.length>0?(0,Z.jsx)("tbody",{children:p.map((function(e){return(0,Z.jsxs)("tr",{children:[(0,Z.jsx)("td",{children:e.sender.email}),(0,Z.jsx)("td",{children:e.createdAt.substring(0,10)}),(0,Z.jsx)("td",{children:(0,Z.jsx)(d.Z,{children:(0,Z.jsx)(d.Z.Check,{style:{cursor:"pointer"},type:"switch",id:"message-is-read",defaultChecked:e.isRead,onChange:function(n){R({e:n,id:e.id})}})})}),(0,Z.jsx)("td",{children:(0,Z.jsxs)(v.Z,{children:[(0,Z.jsx)(v.Z.Toggle,{variant:"primary",style:{color:"var(--bs-secondary)"},id:"dropdown-basic",children:(0,Z.jsx)(g.Z,{})}),(0,Z.jsxs)(v.Z.Menu,{children:[(0,Z.jsx)(v.Z.Item,{onClick:function(){return n=e.id,void y("/admin/received-messages-list/".concat(n));var n},children:(0,Z.jsx)(x.Z,{variant:"dark-blue",className:"w-100",style:{color:"var(--bs-secondary)"},children:"Details"})}),(0,Z.jsx)(v.Z.Item,{onClick:function(){return z(e.id)},children:(0,Z.jsx)(x.Z,{variant:"danger",className:"w-100",children:"Delete"})})]})]})})]},e.id)}))}):(0,Z.jsx)("p",{className:"p-2 txt--gray",children:"No Messages were found"})]})]})},k=function(){var e=(0,l.s0)(),n=(0,i.v9)((function(e){return e.user})).userInfo,t=(0,c.useState)(null),f=(0,a.Z)(t,2),m=f[0],v=f[1],j=(0,c.useState)([]),g=(0,a.Z)(j,2),b=g[0],k=g[1],N=(0,c.useState)(""),S=(0,a.Z)(N,2),C=S[0],M=S[1],T=(0,c.useState)(""),A=(0,a.Z)(T,2),R=A[0],z=A[1],L=(0,c.useState)(!1),D=(0,a.Z)(L,2),E=D[0],I=D[1],W=(0,c.useState)(null),J=(0,a.Z)(W,2),U=J[0],_=J[1],G=function(){var e=(0,r.Z)((0,s.Z)().mark((function e(){var t,r,a;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.token,e.prev=1,e.next=4,u.Z.get("api/users/admin-list",{headers:{"Content-Type":"application/json",Authorization:"JWT ".concat(t)},baseURL:"http://localhost:8000"});case 4:r=e.sent,a=r.data,k(a),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),v("There was a problem loading the admins, Make sure you have a stable internet connection");case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(){return e.apply(this,arguments)}}(),q=function(){var e=(0,r.Z)((0,s.Z)().mark((function e(t){var r;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),r=n.token,R.length<1&&v("Message can't be empty"),e.next=5,u.Z.post("api/users/send-message",{content:R.trim(),recipient:C},{headers:{"Content-Type":"application/json",Authorization:"JWT ".concat(r)},baseURL:"http://localhost:8000"});case 5:201===e.sent.status&&(I(!0),M(""),z(""),_(new Date));case 7:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return(0,c.useEffect)((function(){n||e("/login"),n&&n.isAdmin&&G()}),[]),(0,Z.jsxs)("div",{className:p.Z["admin-page"],children:[(0,Z.jsx)("div",{className:p.Z["admin-page-left"],children:(0,Z.jsx)(o.Z,{})}),(0,Z.jsxs)("div",{className:p.Z["admin-page-right"],children:[(0,Z.jsxs)("div",{style:{width:"70%",maxWidth:"680px"},children:[(0,Z.jsx)("h1",{className:"txt--black font-family-secondary p-4 mt-3 mb-0 px-0",style:{alignSelf:"flex-start"},children:"Send a Message"}),(0,Z.jsxs)(d.Z,{onSubmit:q,className:"p-4 border-lt d-flex gap-4 flex-column",style:{backgroundColor:"#fff",borderRadius:"5px"},children:[(0,Z.jsxs)(d.Z.Group,{id:"admin-list",children:[m&&(0,Z.jsx)(h.Z,{variant:"danger",children:m}),E&&(0,Z.jsx)(h.Z,{variant:"success",children:"Your message was sent successfully"}),(0,Z.jsx)(d.Z.Label,{className:"font-family-secondary",style:{fontSize:"1.5rem"},children:"Choose an Admin"}),(0,Z.jsxs)(d.Z.Control,{required:!0,as:"select",value:C,onChange:function(e){M(e.target.value)},children:[(0,Z.jsx)("option",{children:"-----------"}),b.map((function(e){return(0,Z.jsxs)("option",{value:e.id,children:[e.fullname," | ",e.email]},e.id)}))]})]}),(0,Z.jsxs)(d.Z.Group,{id:"send-message",children:[(0,Z.jsx)(d.Z.Label,{className:"font-family-secondary",style:{fontSize:"1.5rem"},children:"Message"}),(0,Z.jsx)(d.Z.Control,{placeholder:"Write your message here...",required:!0,as:"textarea",maxLength:450,value:R,onChange:function(e){z(e.target.value)}})]}),(0,Z.jsx)(d.Z.Group,{children:(0,Z.jsx)(x.Z,{type:"submit",variant:"primary",style:{color:"var(--bs-secondary)"},className:"w-100",children:"Send"})})]})]}),(0,Z.jsxs)("div",{className:"d-flex",style:{width:"80%"},id:"messages-table__container",children:[(0,Z.jsx)(y,{refresh:U}),(0,Z.jsx)(w,{})]})]})]})}}}]);
//# sourceMappingURL=690.a6150e63.chunk.js.60993f2d20f0.map